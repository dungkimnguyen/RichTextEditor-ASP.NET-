[
  {
    "Id": "86313",
    "ThreadId": "25775",
    "Html": "\r\nHow can I get html code from RTE in code behind? Please help me. <br />(I use VS 2008)<br /><br /><i><b>HTML</b></i><br />&lt;%@ Page Language=\"VB\" AutoEventWireup=\"false\" CodeFile=\"WB<i>N.aspx.vb\" Inherits=\"WB</i>N\" MasterPageFile=\"~/MasterPage2.master\" %&gt;<br /><br />&lt;%@ Register Assembly=\"FredCK.FCKeditorV2\" Namespace=\"FredCK.FCKeditorV2\" TagPrefix=\"FCKeditorV2\" %&gt;<br /><br />&lt;%@ Register assembly=\"RichTextEditor\" namespace=\"AjaxControls\" tagprefix=\"cc1\" %&gt;<br /><br />&lt;asp:Content ID=\"Content1\" ContentPlaceHolderID=\"cphHead\" Runat=\"Server\"&gt;<br /><br />    &lt;script type=\"text/javascript\"&gt;<br />        function dosub(){<br />            editor = top.document.getElementById(editorId);<br />            editor.value = richeditor.toHtmlString();<br /><br />        }     <br />    &lt;/script&gt;<br /><br />&lt;/asp:Content&gt;<br />&lt;asp:Content ID=\"Content2\" ContentPlaceHolderID=\"cphMain\" Runat=\"Server\"&gt;<br />    &lt;div&gt;<br />        &lt;asp:Panel ID=\"Panel1\" runat=\"server\" &gt;<br /><br /><br />        &lt;br /&gt;   &lt;br /&gt;     <br />        &lt;table&gt;<br />            &lt;tr&gt;<br />                &lt;td colspan=2&gt;<br />                    &lt;b&gt;Title&lt;/b&gt;&lt;br /&gt;<br />                    &lt;asp:TextBox ID=\"txtTopic\" runat=\"server\" Width=\"300px\" &gt;&lt;/asp:TextBox&gt;<br /><br />                &lt;/td&gt;<br />            &lt;/tr&gt;<br />            &lt;tr&gt;<br />                 &lt;td colspan=2&gt;<br />                    &lt;b&gt;Detail&lt;/b&gt;&lt;br /&gt;<br />                    &lt;cc1:RichTextEditor ID=\"Rte1\" Theme=\"Blue\"  runat=\"server\" /&gt;<br />                &lt;/td&gt;<br />            &lt;/tr&gt;<br />             &lt;tr&gt;<br />                &lt;%--&lt;td&gt;ชื่อ&lt;/td&gt;--%&gt;<br />                &lt;td colspan=2&gt;<br />                    &lt;b&gt;ชื่อ&lt;/b&gt;&lt;br /&gt;<br />                    &lt;asp:TextBox ID=\"txtName\" runat=\"server\" Width=\"300px\" &gt;&lt;/asp:TextBox&gt;<br />                    &lt;/td&gt;<br />            &lt;/tr&gt;<br />            &lt;tr&gt;<br />                &lt;td colspan=2 align=\"center\"&gt;<br />                    &lt;asp:Button ID=\"cmdPost\" runat=\"server\" Text=\"Post\" Width=\"80px\" /&gt; <br />                    &lt;asp:Button ID=\"cmdCancel\" runat=\"server\" Text=\"Cancel\" Width=\"80px\" /&gt;<br /><br />                &lt;/td&gt;<br />            &lt;/tr&gt;<br />        &lt;/table&gt;<br />        &lt;/asp:Panel&gt;<br />    &lt;/div&gt;<br />&lt;/asp:Content&gt;<br /><br /><i><b>CODE BEHIND</b></i><br />Protected Sub cmdPost_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmdPost.Click<br />        Dim adox As New clsAdoX(Me, m_strConn)<br />        Dim strFileName As String = \"\"<br />        Dim strLocalFileName As String = \"\"<br />        Dim strSQL As String<br /><br />        Try<br />            Dim html As String = Me.Page.Request.Form(\"ctl00$cphMain$editor\")  <i><b>'--&gt; I can't get html from here</b></i><br /><br />            strSQL = \"INSERT INTO QUESTION (Q<i>ID, Q</i>TOPIC, Q_NOTE\"<br />            strSQL &amp;= \", Q<i>IP, Q</i>DATE, Q<i>POST</i>NAME, Q<i>PIC</i>PATH)\"<br />            strSQL &amp;= \"VALUES (\"<br />            strSQL &amp;= ValueForSQL(m_intQID)<br />            strSQL &amp;= \",\" &amp; ValueForSQL(txtTopic.Text)<br />            strSQL &amp;= \",\" &amp; ValueForSQL(Rte1.Text)<br />            strSQL &amp;= \",\" &amp; ValueForSQL(Request.UserHostAddress())<br />            strSQL &amp;= \",\" &amp; ValueForSQL(Now.ToString(\"yyyy/M/d HH:mm:ss\"))<br />            strSQL &amp;= \",\" &amp; ValueForSQL(txtName.Text)<br />            strSQL &amp;= \",\" &amp; ValueForSQL(strFileName)<br />            strSQL &amp;= \")\"<br /><br />            adox.Execute(strSQL)<br /><br />            '---------------------------------------------------------------<br /><br /><br />        Catch ex As Exception<br />            adox.RollbackTransaction()<br />        End Try<br />    End Sub<br />",
    "PostedDate": "2008-04-11T06:50:23.933-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "86377",
    "ThreadId": "25775",
    "Html": "\r\nIf you haven't already add the following to your Page Load event:<br />    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load<br />        Page.Form.Attributes.Add(\"onSubmit\", \"CopyText(); return true;\")<br />        '<br />        'whatever else you need to handle<br />        '<br />    End Sub<br /><br />CopyText is a javascript function built in to the RTE which helps migrate the RTE HTML from client to server-side.<br /><br />If you already have this and are still having problems, try putting a debug break point somewhere in your code-behind and navigate to Me.Page.Request.Form.AllKeys in your locals window and make sure that:<br />1. there is an entry of:   [some id's]$editor in the list of keys<br />2. that you have unique id name correct in your code<br /><br />Hope this helps<br />",
    "PostedDate": "2008-04-11T12:07:26.38-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "86432",
    "ThreadId": "25775",
    "Html": "\r\nNow, I added Page Load event to my code.<br /><br />*A potentially dangerous Request.Form value was detected from the client (ctl00$cphMain$editor=\"&lt;P align=left&gt;&lt;FONT ...\"). <br />Description: Request Validation has detected a potentially dangerous client input value, and processing of the request has been aborted. This value may indicate an attempt to compromise the security of your application, such as a cross-site scripting attack. You can disable request validation by setting validateRequest=false in the Page directive or in the configuration section. However, it is strongly recommended that your application explicitly check all inputs in this case. <br /><br />Exception Details: System.Web.HttpRequestValidationException: A potentially dangerous Request.Form value was detected from the client (ctl00$cphMain$editor=\"&lt;P align=left&gt;&lt;FONT ...\").*<br /><br />This error is appeared when I click post the message.<br /><br />How can I do? Thank you very much.<br />",
    "PostedDate": "2008-04-11T21:57:44.983-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "86664",
    "ThreadId": "25775",
    "Html": "\r\nYou are experiencing this error because you have the ValidateRequest property set to \"true\".  The ValidateRequest property protects the website against potential harmful code being passed through the page request.  When the HTML of the RichTextEditor is passed through the Page Request the Validator notices the html markup and throughs an error.<br /><br />The quick solution is to turn the ValidateRequest property off by modifying the top of your *.aspx file, like so:<br />&lt;%@ Page Language=\"C#\" AutoEventWireup=\"true\" CodeBehind=\"Default.aspx.cs\" <b><u>ValidateRequest=\"false\"</u></b><br /><br />If you are concerned about the potential security risks involved with doing so a longer solution can be implemented.  You can try modifying the RTE source code to encode the html in to a format that passes the request validator.  See http://www.codeplex.com/rte/Thread/View.aspx?ThreadId=22248 for more details.<br /><br />For more info on the ValidateRequest property see http://msdn2.microsoft.com/en-us/library/system.web.httprequestvalidationexception.aspx<br /><br />Hope this helps<br />",
    "PostedDate": "2008-04-14T04:03:55.04-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]